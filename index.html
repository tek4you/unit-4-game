<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Button Random</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  <script src="assets/javascript/game.js"></script>
</head>
<body>

    <div>
        <h1 class="gameName">Crystal Collector</h1>
    </div>
    <div class="intro">
        <h3>These are the rules. <br> Click the Crystals until you reach the total without going over.
        </h3>
    </div>

    <div id="placeWinScoreHere"> </div> 
        <div class="totals"><p id="total-wins">Total Wins:</p>
         <p id="total-loses">Total Loses:</p></div>
   
    <div class="gemRow"></div>
    <div class="total-score">Your total score is:</div>
    <div class="score-display"></div>

    
    
<script type="text/javascript">
 // $(document).ready(function () {

    var totWins = 0;
    var totLoses = 0;
    var crystal = {
        gemImage: ["/assets/images/topaz.jpg", "/assets/images/goldGem.jpg", "/assets/images/diamond.png", "/assets/images/emeraldGem.jpg"],            
        }
    var counter = 0;
    var winScore = 0;

    initialize(winScore);

    console.log({
        winScore: winScore
    });

          
          // Create a for loop to create crystals and asssign random value between 1 -12
      for (var i = 0; i < (crystal.gemImage).length; i++) {
        var randGemVal = randomIntFromInterval(1, 12);

          // For each iteration, we will create an imageCrystal
        var imageCrystal = $("<img>");
        imageCrystal.addClass("crystal-image");
  
           // Each imageCrystal will be given a src link to the crystal image
        imageCrystal.attr("src", crystal.gemImage[i]);
  
           // Each imageCrystal will be given a data attribute called data-crystalValue which is a random number between 1 -12.
        imageCrystal.attr("data-crystalvalue", randGemVal);
  
           // Lastly, each crystal image (with all it classes and attributes) will get added to the page.
        $(".gemRow").append(imageCrystal);
      };

              // This time, our click event applies to every single crystal on the page. Not just one.
       $(".crystal-image").on("click", function () {

            // Determining the crystal's value requires us to extract the value from the data attribute.
            // Using the $(this) keyword specifies that we should be extracting the crystal value of the clicked crystal.
            // Using the .attr("data-crystalvalue") allows us to grab the value out of the "data-crystalvalue" attribute.
           
         var crystalValue = ($(this).attr("data-crystalvalue"));

          // Since attributes on HTML elements are strings, we must convert it to an integer before adding to the counter
         var crystalVal = parseInt(crystalValue);
         counter += crystalVal;
           
         
         console.log({
         counter: counter,
         crystalVal: crystalVal,
         crystalValue: crystalValue,
         winScore: winScore
            });

            
         $(".score-display").text(counter);
                    
              if (counter === winScore) {
                alert("You win!");
                totWins = totWins +1;

                        console.log ({
                            totWins: totWins                 
                             });

                    $("#total-wins").append(totWins);
                initialize();
                 }

              else if (counter >= winScore) {
                alert("You lose!!");
                totLoses = totLoses + 1;

                         console.log ({
                             totLoses: totLoses
                              });

                 $("#total-loses").append(totLoses);
                initialize();
                        }
            }); 
                    

    </script>
    </body>
    </html>